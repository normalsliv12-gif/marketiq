<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MarketIQ ‚Äî Test Your Market Intelligence</title>
    <meta name="description" content="Competitive rating system for market intelligence. Solve hypothetical market puzzles. Get rated. Climb the leaderboard.">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;1,9..40,400&family=JetBrains+Mono:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>

    <!-- LOADING SCREEN -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-brand">MarketIQ</div>
            <div class="loading-bar-track"><div class="loading-bar-fill" id="loadingBarFill"></div></div>
            <p class="loading-text" id="loadingText">Connecting to server...</p>
        </div>
    </div>

    <!-- TOAST CONTAINER -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- NAVBAR -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <div class="nav-brand" onclick="showSection('home')" style="cursor:pointer">
                <span class="brand-mark">M</span>
                <span class="brand-name">MarketIQ</span>
            </div>
            <div class="nav-links" id="navLinks">
                <a href="#" class="nav-link" onclick="return navTo('home')">Home</a>
                <a href="#" class="nav-link" onclick="return navTo('puzzles')">Daily Puzzles</a>
                <a href="#" class="nav-link" onclick="return navTo('thrill')">Thrill Round</a>
                <a href="#" class="nav-link" onclick="return navTo('leaderboard')">Leaderboard</a>
                <a href="#" class="nav-link predictions-nav-link" onclick="return navTo('predictions')">Predictions</a>
                <a href="#" class="nav-link" onclick="return navTo('notes')">Notes</a>
                <a href="#" class="nav-link" onclick="return navTo('profile')">Profile</a>
            </div>
            <div class="nav-user" id="navUser">
                <button class="btn-primary btn-sm" onclick="showSection('login')">Sign In</button>
            </div>
        </div>
    </nav>

    <!-- MOBILE BOTTOM NAV -->
    <nav class="mobile-nav" id="mobileNav">
        <button class="mnav-btn" onclick="navTo('home')" data-section="home">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
            <span>Home</span>
        </button>
        <button class="mnav-btn" onclick="navTo('puzzles')" data-section="puzzles">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M8 12h8M12 8v8"/></svg>
            <span>Puzzles</span>
        </button>
        <button class="mnav-btn thrill" onclick="navTo('thrill')" data-section="thrill">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
            <span>Thrill</span>
        </button>
        <button class="mnav-btn" onclick="navTo('leaderboard')" data-section="leaderboard">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="18 20 18 10"/><polyline points="12 20 12 4"/><polyline points="6 20 6 14"/></svg>
            <span>Ranks</span>
        </button>
        <button class="mnav-btn predictions-mnav" onclick="navTo('predictions')" data-section="predictions">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 8v4l3 3"/></svg>
            <span>Predict</span>
        </button>
        <button class="mnav-btn" onclick="navTo('profile')" data-section="profile">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
            <span>Profile</span>
        </button>
    </nav>

    <!-- ==================== LOGIN ==================== -->
    <section id="loginSection" class="section active">
        <div class="container">
            <div class="login-wrap">
                <div class="login-box">
                    <div class="login-logo">
                        <div class="login-logo-mark">M</div>
                        <h1>MarketIQ</h1>
                        <p>Competitive rating for market intelligence</p>
                    </div>
                    <form id="loginForm" onsubmit="handleLogin(event)">
                        <div class="form-group">
                            <label for="usernameInput">Username</label>
                            <input type="text" id="usernameInput" placeholder="Enter or create a username" maxlength="20" minlength="3" required autocomplete="off" spellcheck="false">
                            <span class="form-hint">Same username = same account, any device</span>
                        </div>
                        <div class="form-group" id="passwordGroup">
                            <label for="passwordInput">Password</label>
                            <div class="password-input-wrap">
                                <input type="password" id="passwordInput" placeholder="Enter your password" maxlength="128" autocomplete="current-password">
                                <button type="button" class="password-toggle" onclick="togglePasswordVisibility('passwordInput', this)" aria-label="Toggle password visibility">
                                    <svg id="eyeIconShow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                                    <svg id="eyeIconHide" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18" style="display:none"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/></svg>
                                </button>
                            </div>
                            <span class="form-hint" id="passwordHint">Required for all accounts ¬∑ minimum 4 characters</span>
                        </div>
                        <button type="submit" class="btn-primary btn-full" id="loginBtn">
                            Start Competing
                        </button>
                    </form>
                    <div class="login-pills">
                        <span class="pill">No real money</span>
                        <span class="pill">No real stocks</span>
                        <span class="pill">Pure skill</span>
                    </div>
                </div>
                <div class="login-side">
                    <div class="login-quote">"The only platform that rates market thinking ‚Äî not luck."</div>
                    <div class="login-metrics">
                        <div class="lm-item"><div class="lm-val mono">1,200</div><div class="lm-key">Starting Rating</div></div>
                        <div class="lm-item"><div class="lm-val mono">+15</div><div class="lm-key">Best Decision</div></div>
                        <div class="lm-item"><div class="lm-val mono">‚àí10</div><div class="lm-key">Poor Decision</div></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ==================== HOME ==================== -->
    <section id="homeSection" class="section">
        <div class="hero-bg">
            <div class="hero-grid"></div>
            <div class="container">
                <div class="hero">
                    <div class="hero-tag">Beta ‚Äî Testing Phase</div>
                    <h1 class="hero-h1">Test Your <span class="hero-accent">Market Intelligence</span></h1>
                    <p class="hero-sub">Compete in hypothetical market puzzles. Get rated. Climb the global leaderboard. No real money ‚Äî pure analytical skill.</p>
                    <div class="hero-btns">
                        <button class="btn-primary btn-large" onclick="showSection('puzzles')">
                            Start Today's Puzzles <span class="btn-arrow">‚Üí</span>
                        </button>
                        <button class="btn-ghost btn-large" onclick="showSection('leaderboard')">View Leaderboard</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            <!-- Stats Bar -->
            <div class="stats-bar">
                <div class="sb-label">Your Stats</div>
                <div class="sb-items">
                    <div class="sb-item">
                        <div class="sb-val mono" id="userRating">1200</div>
                        <div class="sb-key">Rating</div>
                    </div>
                    <div class="sb-div"></div>
                    <div class="sb-item">
                        <div class="sb-val mono" id="userAccuracy">‚Äî</div>
                        <div class="sb-key">Accuracy</div>
                    </div>
                    <div class="sb-div"></div>
                    <div class="sb-item">
                        <div class="sb-val mono" id="userStreak">0</div>
                        <div class="sb-key">Streak</div>
                    </div>
                    <div class="sb-div"></div>
                    <div class="sb-item">
                        <div class="sb-val mono" id="userPuzzles">0</div>
                        <div class="sb-key">Puzzles</div>
                    </div>
                    <div class="sb-div"></div>
                    <div class="sb-item">
                        <div class="sb-val mono accent" id="dailyRemaining">3</div>
                        <div class="sb-key">Remaining Today</div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
                <div class="qa-card" onclick="showSection('puzzles')">
                    <div class="qa-icon cyan">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24"><rect x="2" y="3" width="20" height="14" rx="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>
                    </div>
                    <div class="qa-body">
                        <h3>Daily Puzzles</h3>
                        <p>5 structured scenarios per day. Decisions rated Optimal ‚Üí Poor.</p>
                    </div>
                    <span class="qa-arrow">‚Üí</span>
                </div>
                <div class="qa-card thrill-qa" onclick="showSection('thrill')">
                    <div class="qa-icon orange">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
                    </div>
                    <div class="qa-body">
                        <h3>Thrill Round</h3>
                        <p>60 seconds. One high-volatility scenario. Maximum pressure.</p>
                    </div>
                    <span class="qa-arrow">‚Üí</span>
                </div>
            </div>

            <!-- How It Works -->
            <div class="section-block">
                <h2 class="block-title">How It Works</h2>
                <p class="block-sub">No luck involved. Every rating point is earned through decision quality.</p>
                <div class="how-grid">
                    <div class="how-card">
                        <div class="how-num">01</div>
                        <h3>Analyze the Scenario</h3>
                        <p>Read a hypothetical market situation. Study the chart and context. No real data ‚Äî purely analytical.</p>
                    </div>
                    <div class="how-card">
                        <div class="how-num">02</div>
                        <h3>Make Your Decision</h3>
                        <p>Choose from 4 options. Each is classified by quality ‚Äî not just right/wrong, but how good your thinking is.</p>
                    </div>
                    <div class="how-card">
                        <div class="how-num">03</div>
                        <h3>Rating Updates Instantly</h3>
                        <p>Optimal +15 ¬∑ Good +8 ¬∑ Risky +3 ¬∑ Poor ‚àí10. Consistent quality builds lasting rating.</p>
                    </div>
                    <div class="how-card">
                        <div class="how-num">04</div>
                        <h3>Compete Globally</h3>
                        <p>Your rating is visible to everyone. The leaderboard updates in real time. Prove your edge.</p>
                    </div>
                </div>
            </div>

            <div class="disclaimer-bar">
                <strong>Disclaimer:</strong> MarketIQ does not involve real money, real trading, or financial advice. All scenarios are hypothetical and created purely for skill assessment.
            </div>
        </div>
    </section>

    <!-- ==================== DAILY PUZZLES ==================== -->
    <section id="puzzlesSection" class="section">
        <div class="container">
            <div class="section-top-row">
                <div>
                    <h1>Daily Puzzles</h1>
                    <p class="section-sub">5 hypothetical market scenarios ¬∑ resets every 24 hours</p>
                </div>
                <div class="puzzle-progress">
                    <div class="progress-dots">
                                                                    <span id="dot0"></span>
                                                                    <span id="dot1"></span>
                                                                    <span id="dot2"></span>
                                                                    <span id="dot3"></span>
                                                                    <span id="dot4"></span>
                                                       </div>

                    <div class="remaining-tag" id="puzzlesRemaining">5 remaining</div>
                </div>
            </div>

            <div id="puzzleContainer" class="puzzle-card"></div>

            <div id="noPuzzlesMessage" class="empty-state" style="display:none">
                <div class="empty-check">‚úì</div>
                <h2>All caught up for today</h2>
                <p>Come back tomorrow for 5 new puzzles. Your rating is live on the leaderboard.</p>
                <div class="empty-btns">
                    <button class="btn-primary" onclick="showSection('thrill')">Try Thrill Round</button>
                    <button class="btn-ghost" onclick="showSection('leaderboard')">View Leaderboard</button>
                </div>
            </div>
        </div>
    </section>

    <!-- ==================== THRILL ROUND ==================== -->
    <section id="thrillSection" class="section">
        <div class="container">
            <div class="section-top-row">
                <div>
                    <h1>Thrill Round</h1>
                    <p class="section-sub">One scenario ¬∑ 60 seconds ¬∑ high stakes</p>
                </div>
            </div>
            <div id="thrillStatus" class="thrill-status-wrap"></div>
            <div id="thrillPuzzleContainer"></div>
        </div>
    </section>

    <!-- ==================== LEADERBOARD ==================== -->
    <section id="leaderboardSection" class="section">
        <div class="container">
            <div class="section-top-row">
                <div>
                    <h1>Global Leaderboard</h1>
                    <p class="section-sub">Top 20 competitors ¬∑ updated in real time</p>
                </div>
                <div class="live-chip">
                    <span class="live-dot-anim"></span>
                    LIVE
                </div>
            </div>

            <div class="leaderboard-wrap">
                <div class="lb-head">
                    <div class="lbc rank">Rank</div>
                    <div class="lbc username">Username</div>
                    <div class="lbc rating">Rating</div>
                    <div class="lbc accuracy">Accuracy</div>
                    <div class="lbc puzzles">Puzzles</div>
                </div>
                <div id="leaderboardBody">
                    <div class="lb-loading">Loading rankings...</div>
                </div>
            </div>
        </div>
    </section>

     <!-- ==================== NOTES ==================== -->

    <section id="notes" class="notes-section">
      <div class="container">
        <h2>üìò Share Market Notes</h2>
        <p class="notes-subtitle">
            Complete beginner-to-advanced guide covering trading, investing and market analysis.
        </p>

        <div class="notes-grid">

            <!-- Technical Analysis -->
            <div class="note-card">
                <h3>üìä Technical Analysis</h3>
                <p>
                    Technical analysis is the study of historical price movements and trading volume 
                    to forecast future price direction. It assumes that market price reflects all 
                    available information. Traders analyze charts, patterns and indicators instead of 
                    company fundamentals. It focuses on identifying trends, momentum, and market psychology. 
                    Common tools include moving averages, RSI, MACD, Bollinger Bands, and Fibonacci retracements. 
                    Technical analysis works on the principle that history repeats itself due to human behavior. 
                    It can be used for intraday trading, swing trading, and long-term investing. 
                    Support and resistance levels play a key role in identifying entry and exit points. 
                    Volume analysis helps confirm the strength of a trend. 
                    Risk management is essential while using technical analysis to avoid major losses.Support and resistance are important price levels where the market often changes direction. Indicators like Moving Averages, RSI, and MACD help traders understand trend direction and momentum. Chart patterns such as double tops, double bottoms, and head and shoulders can signal possible reversals. Risk management is essential, including using stop-loss orders and limiting risk per trade. Technical analysis is mainly used for short-term trading decisions. Beginners should start simple, practice regularly, and avoid emotional trading.
                </p>
            </div>

            <!-- Candlestick Patterns -->
            <div class="note-card">
                <h3>üïØÔ∏è Candlestick Patterns</h3>
                <p>
                    Candlestick patterns are shapes formed by one or more candlesticks on a price chart. They help traders understand what buyers and sellers are doing in the market. Each candlestick shows four prices: open, close, high, and low. If the closing price is higher than the opening price, the candle is usually green (bullish). If the closing price is lower than the opening price, it is usually red (bearish).

                    Some candlestick patterns signal that the price may go up. For example, a **Hammer** pattern appears after a downtrend and can signal a possible price reversal upward. A **Bullish Engulfing** pattern happens when a large green candle fully covers a small red candle, showing strong buying pressure.

                    Other patterns signal that the price may go down. A **Shooting Star** appears after an uptrend and may indicate a reversal downward. A **Bearish Engulfing** pattern happens when a large red candle fully covers a small green candle, showing strong selling pressure.

                    Candlestick patterns work best when combined with support and resistance levels. They are not always accurate, so traders should use risk management and confirmation from other indicators. Beginners should practice identifying these patterns on charts before trading with real money.

                </p>
            </div>

            <!-- Investing Basics -->
            <div class="note-card">
                <h3>üí∞ Investing Basics</h3>
                <p>
                    Investing involves putting money into assets with the expectation of long-term growth. 
                    Unlike trading, investing focuses on years rather than short-term price movements. 
                    Investors analyze company fundamentals such as revenue, profit, debt and growth potential. 
                    Diversification reduces risk by spreading money across sectors and asset classes. 
                    Compounding helps investments grow exponentially over time. 
                    Blue-chip stocks are considered stable long-term options. 
                    Index funds allow investors to invest in the entire market. 
                    Risk tolerance and financial goals determine investment strategy. 
                    Patience and discipline are key to successful investing. 
                    Avoid emotional decisions and focus on long-term wealth creation.
                    Investing is usually better for long-term goals rather than quick profits. Starting early allows your money to grow through compound interest, which means earning returns on your returns. Beginners should research carefully, start with small amounts, and invest regularly for steady growth.
                </p>
            </div>

            <!-- Trading Strategies -->
            <div class="note-card">
                <h3>‚ö° Trading Strategies</h3>
                <p>
                    Trading strategies define rules for entering and exiting trades. 
                    Intraday trading involves buying and selling within the same day. 
                    Swing trading captures short-term trends over days or weeks. 
                    Breakout trading focuses on price moving beyond resistance or support. 
                    Momentum trading follows strong trending stocks. 
                    Scalping involves quick trades for small profits. 
                    Trend-following strategies rely on moving averages. 
                    Risk-reward ratio should be planned before entering a trade. 
                    Stop-loss orders protect against unexpected losses. 
                    Consistency and discipline are essential for successful trading.Trading strategies are planned methods that traders use to decide when to buy and sell in financial markets. A strategy helps remove emotions and provides clear rules for trading decisions. Beginners should always follow a strategy instead of guessing or trading randomly.

                    One common strategy is **trend trading**, where traders buy in an uptrend and sell in a downtrend. Another strategy is **range trading**, which involves buying at support levels and selling at resistance levels when the market moves sideways.

                    **Breakout trading** is when traders enter a trade after the price breaks above resistance or below support with strong momentum. **Scalping** is a short-term strategy where traders make small profits from small price movements. **Swing trading** focuses on holding trades for several days to capture medium-term price moves.

                    Risk management is a key part of every trading strategy. Traders should use stop-loss orders to limit losses and never risk too much money on one trade. It is also important to test a strategy on a demo account before using real money. A good trading strategy should be simple, clear, and consistent.

                </p>
            </div>

            <!-- Risk Management -->
            <div class="note-card">
                <h3>üõ°Ô∏è Risk Management</h3>
                <p>
                    Risk management is the most important part of trading and investing. 
                    It focuses on protecting capital before aiming for profits. 
                    Position sizing determines how much capital to risk per trade. 
                    Traders usually risk only 1-2% of total capital per trade. 
                    Stop-loss orders limit potential losses automatically. 
                    Diversification reduces overall portfolio risk. 
                    Avoid over-leveraging as it increases risk significantly. 
                    Risk-reward ratio should be at least 1:2 for healthy trading. 
                    Emotional control prevents impulsive decisions. 
                    Long-term survival in the market depends on proper risk management.
                </p>
            </div>

            <!-- Chart Analysis -->
            <div class="note-card">
                <h3>üìà Chart Analysis</h3>
                <p>
                    Chart analysis helps traders understand market structure and trend direction. 
                    Trends can be upward, downward or sideways. 
                    Support is a price level where buying pressure increases. 
                    Resistance is where selling pressure increases. 
                    Trendlines help identify continuation patterns. 
                    Volume confirms the strength of price movement. 
                    Breakouts above resistance indicate bullish strength. 
                    Breakdown below support indicates bearish weakness. 
                    Chart patterns like triangles and head & shoulders signal reversals. 
                    Combining chart analysis with indicators improves decision accuracy.Chart analysis is the study of price charts to understand how the market is moving. It helps traders decide when to buy or sell based on price behavior. Instead of focusing on company news, chart analysis focuses on patterns and trends in price movement.

                    The most common chart type is the candlestick chart, which shows the open, high, low, and close prices. By looking at these candles, traders can see whether buyers or sellers are stronger.

                    One important part of chart analysis is identifying trends. An uptrend shows higher highs and higher lows, while a downtrend shows lower highs and lower lows. Recognizing the trend helps traders trade in the right direction.

                    Support and resistance levels are also key areas on a chart. Support is where price often stops falling and moves up. Resistance is where price often stops rising and moves down.

                    Traders also use indicators like moving averages and RSI to confirm signals. Chart patterns such as triangles, double tops, and head and shoulders can suggest possible future price movements. Beginners should keep charts simple and practice regularly to improve their skills.

                </p>
            </div>

        </div>
    </div>
</section>
    
    <!-- ==================== PROFILE ==================== -->
    <section id="profileSection" class="section">
        <div class="container">
            <div class="profile-top">
                <div class="profile-left">
                    <div class="profile-avatar" id="profileAvatar">M</div>
                    <div>
                        <h1 id="profileUsername">Username</h1>
                        <div class="profile-global-rank" id="profileRankBadge">#‚Äî Global Rank</div>
                    </div>
                </div>
                <div class="profile-right">
                    <div class="profile-rating-label">Rating</div>
                    <div class="profile-rating-num mono" id="profileRating">1200</div>
                </div>
            </div>

            <div class="profile-stat-row">
                <div class="ps-card">
                    <div class="ps-val mono" id="profileAccuracy">0%</div>
                    <div class="ps-key">Accuracy</div>
                </div>
                <div class="ps-card">
                    <div class="ps-val mono" id="profilePuzzles">0</div>
                    <div class="ps-key">Total Puzzles</div>
                </div>
                <div class="ps-card">
                    <div class="ps-val mono" id="profileStreak">0</div>
                    <div class="ps-key">Day Streak</div>
                </div>
                <div class="ps-card calibration-ps-card">
                    <div class="ps-val mono calibration-score-val" id="profileCalibrationScore">‚Äî</div>
                    <div class="ps-key">Calibration Score</div>
                    <div class="ps-key calibration-sub-label" id="profileCalibrationLabel"></div>
                </div>
            </div>

            <div class="profile-sections">
                <div class="profile-section-card">
                    <h2>Decision Breakdown</h2>
                    <div class="breakdown">
                        <div class="bd-row">
                            <span class="bd-label optimal">Optimal</span>
                            <div class="bd-bar-track"><div class="bd-bar optimal" id="barOptimal" style="width:0%"></div></div>
                            <span class="bd-num" id="optimalCount">0</span>
                        </div>
                        <div class="bd-row">
                            <span class="bd-label good">Good</span>
                            <div class="bd-bar-track"><div class="bd-bar good" id="barGood" style="width:0%"></div></div>
                            <span class="bd-num" id="goodCount">0</span>
                        </div>
                        <div class="bd-row">
                            <span class="bd-label risky">Risky</span>
                            <div class="bd-bar-track"><div class="bd-bar risky" id="barRisky" style="width:0%"></div></div>
                            <span class="bd-num" id="riskyCount">0</span>
                        </div>
                        <div class="bd-row">
                            <span class="bd-label poor">Poor</span>
                            <div class="bd-bar-track"><div class="bd-bar poor" id="barPoor" style="width:0%"></div></div>
                            <span class="bd-num" id="poorCount">0</span>
                        </div>
                    </div>
                </div>

                <div class="profile-section-card">
                    <h2>Recent Activity</h2>
                    <div id="recentActivity">
                        <p class="empty-activity">No activity yet. Start solving puzzles!</p>
                    </div>
                </div>
            </div>

            <div class="profile-actions-row">
                <button class="btn-ghost btn-full" onclick="changePassword()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16" style="margin-right:6px;vertical-align:-2px"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
                    Change Password
                </button>
                <button class="btn-secondary btn-full logout-btn" onclick="logout()">Sign Out</button>
            </div>
        </div>
    </section>
    <!-- ==================== PREDICTIONS ==================== -->
    <section id="predictionsSection" class="section">
        <div class="container">

            <!-- Header -->
            <div class="section-top-row pred-header-row">
                <div>
                    <h1>Weekly Forecasts</h1>
                    <p class="section-sub">Three market questions ¬∑ one submission per week ¬∑ crowd-scored</p>
                </div>
                <div class="pred-header-chips">
                    <div class="pred-timer-chip">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
                        <span class="pred-timer-label">Closes in</span>
                        <span class="pred-timer-val mono" id="predTimeRemaining">‚Äî</span>
                    </div>
                    <div class="live-chip">
                        <span class="live-dot-anim"></span>
                        LIVE
                    </div>
                </div>
            </div>

            <!-- FORECAST VIEW (pre-submission) -->
            <div id="predForecastView">
                <div id="predQuestionsContainer" class="pred-questions-wrap">
                    <!-- Cards injected by JS -->
                </div>
                <div class="pred-submit-row">
                    <p class="pred-submit-hint">Move all three sliders to unlock submission</p>
                    <button class="btn-primary btn-large pred-submit-btn-main" id="predSubmitBtn"
                            onclick="submitPredictions()" disabled>
                        Submit Forecasts
                        <span class="btn-arrow">‚Üí</span>
                    </button>
                </div>
            </div>

            <!-- RESULTS VIEW (post-submission) -->
            <div id="predResultsView" style="display:none">
                <div class="pred-results-header">
                    <div class="pred-submitted-badge-main">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" width="18" height="18"><polyline points="20 6 9 17 4 12"/></svg>
                        Forecasts submitted for this week
                    </div>
                    <p class="pred-results-sub">Results update as more participants submit. Final scores calculated at week close.</p>
                </div>
                <div id="predResultsContainer" class="pred-results-wrap">
                    <!-- Result cards injected by JS -->
                </div>
            </div>

        </div>
    </section>

<!-- ==================== SET PASSWORD MODAL ==================== -->
<div id="setPasswordModal" class="modal-overlay" style="display:none" onclick="closeSetPasswordModal(event)">
    <div class="modal-box">
        <div class="modal-header">
            <div class="modal-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="22" height="22"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
            </div>
            <div>
                <h2 class="modal-title" id="setPasswordTitle">Secure Your Account</h2>
                <p class="modal-subtitle" id="setPasswordSubtitle">Set a password to protect your account before continuing.</p>
            </div>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label for="newPasswordInput">New Password</label>
                <div class="password-input-wrap">
                    <input type="password" id="newPasswordInput" placeholder="Create a password (min 4 characters)" maxlength="128" autocomplete="new-password">
                    <button type="button" class="password-toggle" onclick="togglePasswordVisibility('newPasswordInput', this)" aria-label="Toggle">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18" style="display:none"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/></svg>
                    </button>
                </div>
            </div>
            <div class="form-group">
                <label for="confirmPasswordInput">Confirm Password</label>
                <div class="password-input-wrap">
                    <input type="password" id="confirmPasswordInput" placeholder="Repeat your password" maxlength="128" autocomplete="new-password">
                    <button type="button" class="password-toggle" onclick="togglePasswordVisibility('confirmPasswordInput', this)" aria-label="Toggle">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18" style="display:none"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/></svg>
                    </button>
                </div>
            </div>
            <div class="password-strength-wrap" id="passwordStrengthWrap" style="display:none">
                <div class="password-strength-track">
                    <div class="password-strength-bar" id="passwordStrengthBar"></div>
                </div>
                <span class="password-strength-label" id="passwordStrengthLabel"></span>
            </div>
        </div>
        <div class="modal-actions">
            <button class="btn-primary" id="setPasswordBtn" onclick="confirmSetPassword()">Set Password</button>
        </div>
    </div>
</div>

<!-- TradingView Lightweight Charts -->
<script src="https://unpkg.com/lightweight-charts@4.1.0/dist/lightweight-charts.standalone.production.js"></script>

    <!-- FIREBASE SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <!-- Chart.js for Predictions -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>

    <!-- APP SCRIPTS -->
    <script src="firebase-config.js"></script>
    <script src="puzzles.js"></script>
    <script src="app.js"></script>
</body>
</html>


